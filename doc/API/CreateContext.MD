// https://react.dev/reference/react/createContext

# createContext

`createContext` permite que voc√™ crie um [contexto](https://react.dev/learn/passing-data-deeply-with-context) que os componentes podem fornecer ou ler.

```typescript
const SomeContext = createContext(defaultValue);
```

- [Refer√™ncia](https://react.dev/reference/react/createContext#reference)
    - [createContext(defaultValue)](https://react.dev/reference/react/createContext#createcontext)
    - [SomeContext.Provider](https://react.dev/reference/react/createContext#provider)
    - [SomeContext.Consumer](https://react.dev/reference/react/createContext#consumer)

- [Uso](https://react.dev/reference/react/createContext#usage)
    - [Criando contexto](https://react.dev/reference/react/createContext#creating-context)
    - [Importando e exportando contexto de um arquivo](https://react.dev/reference/react/createContext#importing-and-exporting-context-from-a-file)
- [Resolu√ß√£o de problemas](https://react.dev/reference/react/createContext#troubleshooting)
    -[N√£o consigo encontrar uma forma de mudar o valor do contexto](https://react.dev/reference/react/createContext#i-cant-find-a-way-to-change-the-context-value)

## Refer√™ncia

### `createContext(defaultValue)`

Chame `createContext` fora de qualquer componente para criar um contexto.

```typescript
import { createContext } from 'react';

const ThemeContext = createContext('light');
```

[Veja mais exemplos abaixo](https://react.dev/reference/react/createContext#usage).

### Par√¢metros

- `defaultValue`: O valor que voc√™ quer que o contexto tenha quando n√£o houver um provedor de contexto correspondente na √°rvore acima do componente que l√™ o contexto. Se voc√™ n√£o tiver um valor padr√£o significativo, especifique `null`. O valor padr√£o √© uma solu√ß√£o de "√∫ltimo recurso" e n√£o muda com o tempo.

### Retorna

`createContext` retorna um objeto de contexto.

**O objeto de contexto em si n√£o cont√©m informa√ß√µes**. Ele representa *qual* contexto outros componentes leem ou fornecem. Normalmente, voc√™ usar√° [SomeContext.Provider](https://react.dev/reference/react/createContext#provider) em componentes acima para especificar o valor do contexto e chamar√° [useContext(SomeContext)](https://react.dev/reference/react/useContext) em componentes abaixo para l√™-lo. O objeto de contexto possui algumas propriedades:

- `SomeContext.Provider` permite que voc√™ forne√ßa o valor do contexto para os componentes.
- `SomeContext.Consumer` √© uma alternativa e raramente usada para ler o valor do contexto.

## SomeContext.Provider

Envolva seus componentes em um provedor de contexto para especificar o valor deste contexto para todos os componentes internos:

```typescript
function App() {
  const [theme, setTheme] = useState('light');
  // ...
  return (
    <ThemeContext.Provider value={theme}>
      <Page />
    </ThemeContext.Provider>
  );
}
```

### Props

- `value`: O valor que voc√™ deseja passar para todos os componentes que l√™em este contexto dentro deste provedor, n√£o importa o qu√£o profundo. O valor do contexto pode ser de qualquer tipo. Um componente que chama [useContext(SomeContext)](https://react.dev/reference/react/useContext) dentro do provedor recebe o valor do provedor de contexto correspondente mais interno acima dele.


## SomeContext.Consumer

Antes do `useContext` existir, havia uma forma mais antiga de ler o contexto:

```typescript
function Button() {
  // üü° Forma legada (n√£o recomendada)
  return (
    <ThemeContext.Consumer>
      {theme => (
        <button className={theme} />
      )}
    </ThemeContext.Consumer>
  );
}
```

Embora essa forma mais antiga ainda funcione, o c√≥digo novo deve ler o contexto com [useContext()](https://react.dev/reference/react/useContext) em vez disso:

```typescript
function Button() {
  // ‚úÖ Forma recomendada
  const theme = useContext(ThemeContext);
  return <button className={theme} />;
}
```

### Props

- `children`: Uma fun√ß√£o. O React chamar√° a fun√ß√£o que voc√™ passar com o valor atual do contexto determinado pelo mesmo algoritmo que [useContext()](https://react.dev/reference/react/useContext), e renderizar√° o resultado retornado por essa fun√ß√£o. O React tamb√©m reexecutar√° essa fun√ß√£o e atualizar√° a interface sempre que o contexto dos componentes pai mudar.

## Uso

### Criando Contexto

O contexto permite que componentes [passem informa√ß√µes profundamente](https://react.dev/learn/passing-data-deeply-with-context) sem precisar passar explicitamente props.

Chame `createContext` fora de qualquer componente para criar um ou mais contextos.

```typescript
import { createContext } from 'react';

const ThemeContext = createContext('light');
const AuthContext = createContext(null);
```

`createContext` retorna um objeto de contexto. Os componentes podem ler o contexto passando-o para [useContext()](https://react.dev/reference/react/useContext):

```typescript
function Button() {
  const theme = useContext(ThemeContext);
  // ...
}

function Profile() {
  const currentUser = useContext(AuthContext);
  // ...
}
```

Por padr√£o, os valores que eles recebem ser√£o os valores padr√£o que voc√™ especificou ao criar os contextos. No entanto, por si s√≥, isso n√£o √© √∫til porque os valores padr√£o nunca mudam.

O contexto √© √∫til porque voc√™ pode **fornecer outros valores din√¢micos a partir dos seus componentes**:

```typescript
function App() {
  const [theme, setTheme] = useState('dark');
  const [currentUser, setCurrentUser] = useState({ name: 'Taylor' });

  // ...

  return (
    <ThemeContext.Provider value={theme}>
      <AuthContext.Provider value={currentUser}>
        <Page />
      </AuthContext.Provider>
    </ThemeContext.Provider>
  );
}
```

Agora o componente `Page` e quaisquer componentes internos, n√£o importa qu√£o profundos, ‚Äúver√£o‚Äù os valores de contexto passados. Se os valores de contexto passados mudarem, o React re-renderizar√° os componentes que leem o contexto tamb√©m.

[Leia mais sobre leitura e fornecimento de contexto e veja exemplos](https://react.dev/reference/react/useContext).

## Importando e Exportando Contexto de um Arquivo

Muitas vezes, componentes em arquivos diferentes precisar√£o acessar o mesmo contexto. Por isso, √© comum declarar contextos em um arquivo separado. Ent√£o, voc√™ pode usar a [instru√ß√£o `export`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/export) para tornar o contexto dispon√≠vel para outros arquivos:

```typescript
// Contexts.js
import { createContext } from 'react';

export const ThemeContext = createContext('light');
export const AuthContext = createContext(null);
```

Componentes declarados em outros arquivos podem ent√£o usar a instru√ß√£o [`import`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import) para ler ou fornecer esse contexto:

```typescript
// Button.js
import { ThemeContext } from './Contexts.js';

function Button() {
  const theme = useContext(ThemeContext);
  // ...
}
```

```typescript
// App.js
import { ThemeContext, AuthContext } from './Contexts.js';

function App() {
  // ...
  return (
    <ThemeContext.Provider value={theme}>
      <AuthContext.Provider value={currentUser}>
        <Page />
      </AuthContext.Provider>
    </ThemeContext.Provider>
  );
}
```

Isso funciona de maneira similar √† [importa√ß√£o e exporta√ß√£o de componentes](https://react.dev/learn/importing-and-exporting-components).

## Resolu√ß√£o de Problemas

### N√£o consigo encontrar uma maneira de mudar o valor do contexto

C√≥digo como este especifica o valor padr√£o do contexto:

```typescript
const ThemeContext = createContext('light');
```

Esse valor nunca muda. O React usa esse valor apenas como uma fallback se n√£o encontrar um provedor correspondente acima.

Para fazer o contexto mudar com o tempo, [adicione estado e envolva os componentes em um provedor de contexto](https://react.dev/reference/react/useContext#updating-data-passed-via-context).
